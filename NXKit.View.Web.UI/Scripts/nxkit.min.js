!function(NXKit){var init=function($,ko,NXKit){var NXKit;!function(e){!function(){!function(){function e(){this._listeners=[]}return e.prototype.add=function(e){this._listeners.push(e)},e.prototype.remove=function(e){if("function"==typeof e){for(var t=0,n=this._listeners.length;n>t;n++)if(this._listeners[t]===e){this._listeners.splice(t,1);break}}else this._listeners=[]},e.prototype.trigger=function(){for(var e=[],t=0;t<arguments.length-0;t++)e[t]=arguments[t+0];for(var n={},r=this._listeners.slice(0),o=0,i=r.length;i>o;o++)r[o].apply(n,e||[])},e}()}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function t(t,n,r){this._suspend=!1;var o=this;o._intf=t,o._name=n,o._value=ko.observable(null),o._value.subscribe(function(){o._suspend||o.OnUpdate()}),o._valueAsString=e.Util.Computed({read:function(){var e=null!=o._value()?String(o._value()).trim():null;return e?e:null},write:function(e){var t=null!=e?e.trim():null;return o._value(t?t:null)}}),o._valueAsBoolean=e.Util.Computed({read:function(){return o._value()===!0||"true"===o._value()||"True"===o._value()},write:function(e){o._value(e?"true":"false")}}),o._valueAsNumber=e.Util.Computed({read:function(){return""!=o._value()?parseFloat(o._value()):null},write:function(e){o._value(null!=e?e.toString():null)}}),o._valueAsDate=e.Util.Computed({read:function(){return null!=o._value()?new Date(o._value()):null},write:function(e){o._value(e instanceof Date?e.toDateString():"string"==typeof e?null!=e?new Date(e):null:null)}}),null!=r&&o.Update(r)}return Object.defineProperty(t.prototype,"Interface",{get:function(){return this._intf},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Node",{get:function(){return this._intf.Node},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"View",{get:function(){return this._intf.View},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ValueAsString",{get:function(){return this._valueAsString},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ValueAsBoolean",{get:function(){return this._valueAsBoolean},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ValueAsNumber",{get:function(){return this._valueAsNumber},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ValueAsDate",{get:function(){return this._valueAsDate},enumerable:!0,configurable:!0}),t.prototype.Update=function(t){try{var n=this;if(null!=t&&null!=t.Type&&"Object"===t.Type){if(n._suspend=!0,null!=n._value()&&n._value()instanceof e.Node)n._value().Apply(t),e.Log.Debug(n.Name+": Node=>Node");else{var r=new e.Node(n._intf.View,t);n._value(r),e.Log.Debug(n.Name+": Node+>Node")}return void(n._suspend=!1)}var o=n._value();o!==t&&(n._suspend=!0,n._value(t),e.Log.Debug(n.Name+": "+o+"=>"+t),n._suspend=!1)}catch(i){throw i.message="Property.Update()\nMessage: "+i.message,i}},t.prototype.ToData=function(){return this._value()},t.prototype.OnUpdate=function(){this.View.PushUpdate(this.Node,this.Interface,this,this._value())},t}();e.Property=t}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function t(t,n){this._view=t,this._id=-1,this._data=null,this._type=null,this._name=null,this._value=ko.observable(),this._intfs=new e.InterfaceMap,this._nodes=ko.observableArray(),null!=n&&this.Apply(n)}return Object.defineProperty(t.prototype,"View",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsNode",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Interfaces",{get:function(){return this._intfs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Nodes",{get:function(){return this._nodes},enumerable:!0,configurable:!0}),t.prototype.Property=function(e,t){try{var n=this._intfs[e];if(null==n)return null;var r=n.Properties[t];return null==r?null:r}catch(o){throw o.message="Node.Property()\nMessage: "+o.message,o}},t.prototype.Invoke=function(e,t,n){this.View.PushInvoke(this,e,t,n)},t.prototype.Match=function(e){var t=this,n=function(e,t){if(null==e&&null==t)return!0;if(typeof e!=typeof t)return!1;if("boolean"==typeof e&&"boolean"==typeof t)return e===t;if("string"==typeof e&&"string"==typeof t)return e===t;if("number"==typeof e&&"number"==typeof t)return e===t;if("function"==typeof e&&"function"==typeof t)return e.toString()===t.toString();for(var r in e){if(!t.hasOwnProperty(r))return!1;if(!n(e[r],t[r]))return!1}},r=function(e){if(e.Name&&e.Name!==t.Name)return!1;if(e.Type&&e.Type.toLowerCase()!==t.Type.ToString().toLowerCase())return!1;for(var r in e)if(r.indexOf(".")>=0){var o=e[r],i=t.Interfaces[r];if(!i)return!1;for(var u in o){var a=o[u],l=i.Properties[u];if(!l)return!1;if(!n(a,l.Value()))return!1}}return!0};if(Array.isArray(e)){for(var o in e)if(r(e[o]))return!0}else if(r(e))return!0;return!1},t.prototype.Apply=function(e){var t=this;try{t._data=e,t.ApplyId(e.Id),t.ApplyType(e.Type),t.ApplyName(e.Name),t.ApplyValue(e.Value),t.ApplyInterfaces(e),t.ApplyNodes(e.Nodes)}catch(n){throw n.message="Node.Apply()\nMessage: "+n.message,n}},t.prototype.ApplyId=function(e){this._id=e},t.prototype.ApplyType=function(t){this._type=e.NodeType.Parse(t)},t.prototype.ApplyName=function(e){this._name=e},t.prototype.ApplyValue=function(e){this._value(e)},t.prototype.ApplyInterfaces=function(e){try{var t=this;for(var n in e)n.indexOf(".")>-1&&t.UpdateInterface(n,e[n])}catch(r){throw r.message="Node.UpdateInterfaces()\nMessage: "+r.message,r}},t.prototype.UpdateInterface=function(t,n){try{var r=this,o=r._intfs[t];null==o?o=r._intfs[t]=new e.Interface(r,t,n):o.Apply(n)}catch(i){throw i.message="Node.UpdateInterface()\nMessage: "+i.message,i}},t.prototype.ApplyNodes=function(e){try{var n=this;if(null==e)return void n._nodes.removeAll();for(var r=0;r<e.length;r++)if(n._nodes().length<r+1){var o=new t(n._view,e[r]);n._nodes.push(o)}else n._nodes()[r].Apply(e[r]);n._nodes().length>e.length&&n._nodes.splice(e.length)}catch(i){throw i.message="Node.UpdateNodes()\nMessage: "+i.message,i}},t.prototype.ToData=function(){var e=this,t={Id:e._id};for(var n in e._intfs)t[n]=e._intfs[n].ToData();return t},t.prototype.NodesToData=function(){return ko.utils.arrayMap(this._nodes(),function(e){return e.ToData()})},t}();e.Node=t}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){!function(t){function n(e){return ko.observable(e).extend({rateLimit:{timeout:50,method:"notifyWhenChangesStop"}})}function r(e){return ko.observableArray(e).extend({rateLimit:{timeout:50,method:"notifyWhenChangesStop"}})}function o(e){return ko.computed(e).extend({rateLimit:{timeout:50,method:"notifyWhenChangesStop"}})}function i(e,n,r){if(null!=r){var o=r(e,n);if(null!=o)return o}if(null==e&&null===n)return!0;if(typeof e!=typeof n)return!1;if("boolean"==typeof e&&"boolean"==typeof n)return e===n;if("string"==typeof e&&"string"==typeof n)return e===n;if("number"==typeof e&&"number"==typeof n)return e===n;if("function"==typeof e&&"function"==typeof n)return e.toString()===n.toString();for(var i in e)if(e.hasOwnProperty(i))if(n.hasOwnProperty(i)){if(!t.DeepEquals(e[i],n[i],r))return!1}else if(!t.DeepEquals(e[i],null,r))return!1;for(var i in n)if(n.hasOwnProperty(i))if(e.hasOwnProperty(i)){if(!t.DeepEquals(e[i],n[i],r))return!1}else if(!t.DeepEquals(null,n[i],r))return!1;return!0}function u(){for(var e=[],t="0123456789abcdef",n=0;36>n;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}function a(e){return[e.$data].concat(e.$parents)}function l(t){return ko.utils.arrayFirst(a(t),function(t){return t instanceof e.LayoutManager})}t.Observable=n,t.ObservableArray=r,t.Computed=o,t.DeepEquals=i,t.GenerateGuid=u,t.GetContextItems=a,t.GetLayoutManager=l}(e.Util||(e.Util={}));e.Util}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function t(e){this._context=null,this._parent=null;var n=this;if(null==e)throw new Error("context: null");n._context=e,n._parent=ko.computed(function(){var e=[n._context.$data].concat(n._context.$parents);for(var r in e){var o=e[r];if(o instanceof t&&o!=n)return o}return null})}return Object.defineProperty(t.prototype,"Context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Parent",{get:function(){return this._parent()},enumerable:!0,configurable:!0}),t.prototype.GetTemplateOptions_=function(e,t,n,r){return this.GetTemplateOptions(e,t,n,r)},t.prototype.GetTemplateOptions=function(e,t,n,r){return null!=this.Parent?this.Parent.GetTemplateOptions(e,t,n,r||{}):r||{}},t.prototype.GetLocalTemplates=function(){return new Array},t.prototype.GetTemplates=function(){return this.GetLocalTemplates().concat(null!=this.Parent?this.Parent.GetTemplates():new Array)},t.prototype.GetNode=function(t,n){var r=ko.unwrap(t());if(null!=n){var o=ko.unwrap(n);if(o instanceof e.Node)return o}return null!=r&&r instanceof e.Node?r:null!=r&&null!=r.node?ko.unwrap(r.node):void 0},t.prototype.GetUnknownTemplate=function(e){return $("<script />",{type:"text/html",text:'<span class="ui red label">'+JSON.stringify(e)+"</span>"}).appendTo("body")[0]},t.GetTemplateNodeData=function(e){var t=$(e).data("nxkit");if(null!=t)return t;t={};for(var n=0;n<e.attributes.length;n++){var r=e.attributes.item(n);if(0==r.nodeName.indexOf("data-nxkit-")){var o=r.nodeName.substring(11);t[o]=$(e).data("nxkit-"+o)}}return $(e).data("nxkit",t).data("nxkit")},t.TemplatePredicate=function(n,r){return e.Log.Group("TemplatePredicate",function(){if(null!=r&&0==Object.getOwnPropertyNames(r).length)return e.Log.Debug("opts: empty"),!1;var o=t.GetTemplateNodeData(n);return 0==Object.getOwnPropertyNames(o).length?(e.Log.Debug("tmpl: empty"),!1):(e.Log.Object({tmpl:o,opts:r}),e.Util.DeepEquals(o,r,function(e,t){return"*"===e||"*"===t?!0:null}))})},t.TemplateFilter=function(e,n){return e.filter(function(e){return t.TemplatePredicate(e,n)})},t.prototype.GetTemplate=function(e){return t.TemplateFilter(this.GetTemplates(),e)[0]||this.GetUnknownTemplate(e)},t.prototype.GetTemplateName=function(n){var r=this;return e.Log.Group("LayoutManager.GetTemplateName",function(){var o=r.GetTemplate(n);if(null==o)throw new Error("LayoutManager.GetTemplate: no template located");return""==o.id&&(o.id="NXKit.Web__"+e.Util.GenerateGuid().replace(/-/g,"")),e.Log.Object({id:o.id,data:t.GetTemplateNodeData(o)}),ko.observable(o.id)})},t}();e.LayoutManager=t}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},NXKit;!function(e){!function(e){var t=function(t){function n(e){t.call(this,e)}return __extends(n,t),n.prototype.GetTemplateOptions=function(n,r,o,i){try{i=t.prototype.GetTemplateOptions.call(this,n,r,o,i);var u=t.prototype.GetNode.call(this,n,r,o),a=ko.unwrap(n());return null!=u&&u.Type==e.NodeType.Element&&(i.name=u.Name),null!=u&&u.Type==e.NodeType.Text&&(i.type=e.NodeType.Text.ToString()),null!=a&&null!=a.name&&(i.name=ko.unwrap(a.name)),null!=a&&null!=a.layout&&(i.layout=ko.unwrap(a.layout)),i}catch(l){throw l.message="DefaultLayoutManager.GetTemplateOptions()\nMessage: "+l.message,l}},n.prototype.GetLocalTemplates=function(){return null==this._templates&&(this._templates=$('script[type="text/html"]').get()),this._templates},n}(e.LayoutManager);e.DefaultLayoutManager=t}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function e(e){this.callback=e}return Object.defineProperty(e.prototype,"Promise",{get:function(){var e=this;return null!=e.deferred?e.deferred.promise():(e.deferred=$.Deferred(),e.callback(e.deferred),e.deferred.progress())},enumerable:!0,configurable:!0}),e}(),n=function(){function e(){this._queue=new Array}return e.prototype.Register=function(e){var n=this;n._queue.push(new t(e))},e.prototype.Wait=function(e){for(var t=this,n=new Array,r=0;r<t._queue.length;r++)n[r]=t._queue[r].Promise;$.when.apply($,n).done(e)},e}();e.DeferredExecutor=n}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function t(t,n,r){var o=this;o._node=t,o._name=n,o._properties=new e.PropertyMap,null!=r&&o.Apply(r)}return Object.defineProperty(t.prototype,"Node",{get:function(){return this._node},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"View",{get:function(){return this._node.View},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Properties",{get:function(){return this._properties},enumerable:!0,configurable:!0}),t.prototype.Apply=function(t){try{var n=this,r=[];for(var o in n._properties)r.push(n._properties[o]);for(var o in t){var i=o,u=i,a=n._properties[u];null==a?n._properties[u]=new e.Property(n,u,t[i]):a.Update(t[i]);var l=r.indexOf(a);-1!=l&&(r[l]=null)}for(var s=0;s<r.length;s++){var a=r[s];null!=a&&delete n._properties[a.Name]}}catch(c){throw c.message="Interface.Apply()\nMessage: "+c.message,c}},t.prototype.ToData=function(){var e=this,t={};for(var n in e._properties){var r=n,o=e._properties[r];t[e._properties[r].Name]=o.ToData()}return t},t}();e.Interface=t}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function e(){}return e}();e.InterfaceMap=t}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){!function(e){var t=function(){function e(){}return e._init=function(t,n,r,o,i){setTimeout(function(){$(t).checkbox(),$(t).checkbox("setting",{onEnable:function(){var e=!0,t=ko.unwrap(n());if("boolean"==typeof t)e!=t&&n()(e);else if("string"==typeof t){var r="true"===t.toLowerCase()?!0:!1;e!=r&&n()(e?"true":"false")}},onDisable:function(){var e=!1,t=ko.unwrap(n());if("boolean"==typeof t)e!=t&&n()(e);else if("string"==typeof t){var r="true"===t.toLowerCase()?!0:!1;e!=r&&n()(e?"true":"false")}}}),e._update(t,n,r,o,i)},2e3)},e._update=function(e,t){setTimeout(function(){var n=ko.unwrap(t());if("boolean"==typeof n)$(e).checkbox(n?"enable":"disable");else if("string"==typeof n){var r="true"===n.toLowerCase()?!0:!1;$(e).checkbox(r?"enable":"disable")}},1e3)},e.prototype.init=function(t,n,r,o,i){e._init(t,n,r,o,i)},e.prototype.update=function(t,n,r,o,i){e._update(t,n,r,o,i)},e}();e.CheckboxBindingHandler=t,ko.bindingHandlers.nxkit_checkbox=new t}(e.Knockout||(e.Knockout={}));e.Knockout}(e.View||(e.View={}));e.View}(NXKit||(NXKit={})),$.fn.extend({slideRightShow:function(){return this.each(function(){$(this).show("slide",{direction:"right"},1e3)})},slideLeftHide:function(){return this.each(function(){$(this).hide("slide",{direction:"left"},1e3)})},slideRightHide:function(){return this.each(function(){$(this).hide("slide",{direction:"right"},1e3)})},slideLeftShow:function(){return this.each(function(){$(this).show("slide",{direction:"left"},1e3)})}});var NXKit;!function(e){!function(e){!function(e){var t=function(){function e(){}return e.prototype.init=function(e,t){var n=t();$(e).toggle(ko.utils.unwrapObservable(n)),ko.utils.unwrapObservable(n)?$(e).slideLeftShow():$(e).slideLeftHide()},e.prototype.update=function(e,t){var n=t();ko.utils.unwrapObservable(n)?$(e).slideLeftShow():$(e).slideLeftHide()},e}();e.HorizontalVisibleBindingHandler=t,ko.bindingHandlers.nxkit_hvisible=new t,ko.virtualElements.allowedBindings.nxkit_hvisible=!0}(e.Knockout||(e.Knockout={}));e.Knockout}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){!function(e){var t=function(){function e(){}return e._init=function(e,t,n,r,o){ko.bindingHandlers.value.init(e,t,n,r,o)},e._update=function(e,t,n,r,o){ko.bindingHandlers.value.update(e,t,n,r,o)},e.prototype.init=function(t,n,r,o,i){e._init(t,n,r,o,i)},e.prototype.update=function(t,n,r,o,i){e._update(t,n,r,o,i)},e}();e.InputBindingHandler=t,ko.bindingHandlers.nxkit_input=new t}(e.Knockout||(e.Knockout={}));e.Knockout}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(t){!function(t){var n=function(){function t(){}return t._init=function(t,n,r,o,i){for(var u=i,a=e.View.ViewModelUtil.LayoutManagers,l=0;l<a.length;l++)u=u.createChildContext(a[l](u),null,null);return u=u.createChildContext(o),u=u.createChildContext(o),ko.applyBindingsToDescendants(u,t),{controlsDescendantBindings:!0}},t.prototype.init=function(e,n,r,o,i){return t._init(e,n,r,o,i)},t}();t.LayoutManagerExportBindingHandler=n,ko.bindingHandlers.nxkit_layout_manager_export=new n,ko.virtualElements.allowedBindings.nxkit_layout_manager_export=!0}(t.Knockout||(t.Knockout={}));t.Knockout}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){!function(e){var t=function(){function e(){}return e.prototype.init=function(e,t,n,r,o){ko.utils.extend(n(),{clickBubble:!1});ko.bindingHandlers.click.init(e,function(){return function(){setTimeout(function(){var e=t();e&&$("#"+e).modal("show")},5)}},n,r,o)},e}();e.ModalBindingHandler=t,ko.bindingHandlers.nxkit_modal=new t}(e.Knockout||(e.Knockout={}));e.Knockout}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){!function(t){var n=function(){function t(){}return t.prototype.init=function(t,n,r,o,i){var u=new e.LayoutOptions(n()),a=i.createChildContext(u,null,null),l=a.createChildContext(o,null,null);return ko.applyBindingsToDescendants(l,t),{controlsDescendantBindings:!0}},t}();t.OptionsBindingHandler=n,ko.bindingHandlers.nxkit_layout=new n,ko.virtualElements.allowedBindings.nxkit_layout=!0}(e.Knockout||(e.Knockout={}));e.Knockout}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(t){!function(n){var r=function(){function n(){}return n.prototype.init=function(e,t,r,o,i){return ko.bindingHandlers.template.init(e,n.ConvertValueAccessor(t,o,i),r,o,i)},n.prototype.update=function(e,t,r,o,i){return ko.bindingHandlers.template.update(e,n.ConvertValueAccessor(t,o,i),r,o,i)},n.ConvertValueAccessor=function(e,n,r){var o=this;return function(){return t.Log.Group("TemplateBindingHandler.ConvertValueAccessor",function(){t.Log.Object({value:e(),viewModel:n});var i=o.GetTemplateViewModel(e,n,r);if(null==i||0==Object.getOwnPropertyNames(i).length)throw new Error("unknown viewModel");var u=o.GetTemplateOptions(e,n,r);if(null==u||0==Object.getOwnPropertyNames(u).length)throw new Error("unknown template options");var a=o.GetTemplateName(r,u);if(null==a)throw new Error("unknown template");return t.Log.Object({data:i,opts:u,name:a}),{data:i,name:a}})}},n.GetTemplateViewModel=function(e,n){var r=e();return null!=r&&ko.unwrap(r)instanceof t.Node?r:null!=r&&null!=r.data?r.data:null!=r&&null!=r.node&&ko.unwrap(r.node)instanceof t.Node?r.node:n},n.GetTemplateOptions=function(t,n,r){return e.View.Util.GetLayoutManager(r).GetTemplateOptions_(t,n,r,{})},n.GetTemplateName=function(t,n){return e.View.Util.GetLayoutManager(t).GetTemplateName(n)},n}();n.TemplateBindingHandler=r,ko.bindingHandlers.nxkit_template=new r,ko.virtualElements.allowedBindings.nxkit_template=!0}(t.Knockout||(t.Knockout={}));t.Knockout}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){!function(e){var t=function(){function e(){}return e.prototype.init=function(e,t){var n=t();$(e).toggle(ko.utils.unwrapObservable(n)),ko.utils.unwrapObservable(n)?$(e).slideDown():$(e).slideUp()},e.prototype.update=function(e,t){var n=t();ko.utils.unwrapObservable(n)?$(e).slideDown():$(e).slideUp()},e}();e.VisibleBindingHandler=t,ko.bindingHandlers.nxkit_visible=new t,ko.virtualElements.allowedBindings.nxkit_visible=!0}(e.Knockout||(e.Knockout={}));e.Knockout}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function t(e){this._args=e}return t.GetArgs=function(n){for(var r={},o=e.Util.GetContextItems(n),i=0;i<o.length;i++)o[i]instanceof t&&(r=ko.utils.extend(r,o[i]));return r},Object.defineProperty(t.prototype,"Args",{get:function(){return this._args},enumerable:!0,configurable:!0}),t}();e.LayoutOptions=t}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function e(){}return e.Group=function(t,n){"function"==typeof console.group&&e.Verbose&&console.group(t);var r=null!=n?n():null;return e.Verbose&&console.dir(r),"function"==typeof console.groupEnd&&e.Verbose&&console.groupEnd(),r},e.Debug=function(t){for(var n=[],r=0;r<arguments.length-1;r++)n[r]=arguments[r+1];e.Verbose&&console.debug(t,n)},e.Object=function(t){for(var n=[],r=0;r<arguments.length-1;r++)n[r]=arguments[r+1];e.Verbose&&console.dir(t,n)},e.Verbose=!1,e}();e.Log=t}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function e(e,t){this._severity=e,this._text=t}return Object.defineProperty(e.prototype,"Severity",{get:function(){return this._severity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Text",{get:function(){return this._text},enumerable:!0,configurable:!0}),e}();e.Message=t}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function e(e){this._value=e}return e.Parse=function(t){switch(t.toLowerCase()){case"text":return e.Text;case"element":return e.Element}return e.Object},e.prototype.ToString=function(){return this._value},e.Object=new e("object"),e.Text=new e("text"),e.Element=new e("element"),e}();e.NodeType=t}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function t(t,n){var r=this;if(null==t)throw new Error("context: null");if(!(n instanceof e.Node))throw new Error("node: null");r._context=t,r._node=n}return Object.defineProperty(t.prototype,"Context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Node",{get:function(){return this._node},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Contents",{get:function(){return this.GetContents()},enumerable:!0,configurable:!0}),t.prototype.GetContents=function(){try{return e.ViewModelUtil.GetContents(this.Node)}catch(t){throw t.message='NodeViewModel.GetContents()"\nMessage: '+t.message,t}},Object.defineProperty(t.prototype,"ContentsCount",{get:function(){return this.Contents.length},enumerable:!0,configurable:!0}),t}();e.NodeViewModel=t}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function e(){}return e}();e.PropertyMap=t}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){!function(e){e[e.Verbose=1]="Verbose",e[e.Information=2]="Information",e[e.Warning=3]="Warning",e[e.Error=4]="Error"}(e.Severity||(e.Severity={}));e.Severity}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;!function(NXKit){!function(_View){var View=function(){function View(e,t){var n=this;n._server=t,n._body=e,n._save=null,n._hash=null,n._root=null,n._bind=!0,n._threshold=3,n._queue=new Array,n._queueRunning=!1,n._busy=ko.observable(!1)}return Object.defineProperty(View.prototype,"Busy",{get:function(){return this._busy},enumerable:!0,configurable:!0}),Object.defineProperty(View.prototype,"Body",{get:function(){return this._body},enumerable:!0,configurable:!0}),Object.defineProperty(View.prototype,"Data",{get:function(){return{Save:this._save,Hash:this._hash}},enumerable:!0,configurable:!0}),Object.defineProperty(View.prototype,"Root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(View.prototype,"Threshold",{get:function(){return this._threshold},set:function(e){this._threshold=e},enumerable:!0,configurable:!0}),View.prototype.Receive=function(e){var t=this;t._save=e.Save||t._save,t._hash=e.Hash||t._hash;var n=e.Node||null;null!=n&&t.ReceiveNode(n);var r=e.Commands||null;null!=r&&t.ReceiveCommands(r)},View.prototype.ReceiveNode=function(e){var t=this;null!=e&&t.Apply(e||null)},View.prototype.ReceiveCommands=function(commands){for(var self=this,i=0;i<commands.length;i++){var command=commands[i];null!=command&&("NXKit.Server.Commands.Trace, NXKit.Server"===command.$type&&null!=command.Message&&"object"==typeof console,"NXKit.Server.Commands.Script, NXKit.Server"===command.$type&&null!=command.Code&&eval(command.Code))}},View.prototype.Apply=function(e){var t=this;null==t._root?t._root=new _View.Node(t,e):t._root.Apply(e),t.ApplyBindings()},View.prototype.PushUpdate=function(e,t,n,r){var o=this;_View.Log.Debug("View.PushUpdate");var i={$type:"NXKit.Server.Commands.Update, NXKit.Server",NodeId:e.Id,Interface:t.Name,Property:n.Name,Value:r};o.Queue(i)},View.prototype.PushInvoke=function(e,t,n,r){var o=this;_View.Log.Debug("View.PushInvoke");var i={$type:"NXKit.Server.Commands.Invoke, NXKit.Server",NodeId:e.Id,Interface:t,Method:n,Parameters:r};o.Queue(i)},View.prototype.Queue=function(e){var t=this,n=this;if(n._queue.push(e),!n._queueRunning){n._queueRunning=!0;var r={},o=new Array;setTimeout(function(){n._busy(!0);var e=function(){var i=n._queue.splice(0),u=function(a){if(200==a.Status){var l=a.Hash||null;null!=l&&(t._hash=l);var s=a.Save||null;null!=s&&(t._save=s),null!=a.Node&&(r=a.Node),null!=a.Commands&&ko.utils.arrayPushAll(o,a.Commands),0==n._queue.length&&n.Receive({Hash:t._hash,Save:t._save,Node:r,Commands:o}),e()}else if(400==a.Status)n._server({Save:n._save,Hash:n._hash,Commands:i},u);else{if(500!=a.Status)throw new Error("unexpected response code");for(var c=0;c<a.Errors.length;c++)throw new Error(a.Errors[c].Message||"")}};i.length>0?n._server({Hash:n._hash,Commands:i},u):(n._queueRunning=!1,n._busy(!1))};e()},50)}},View.prototype.ApplyBindings=function(){var e=this;e._bind&&null!=e._body&&null!=e._root&&(ko.cleanNode(e._body),NXKit.require(["nx-html!nxkit.html"],function(){$(e._body).attr("data-bind","template: { name: 'NXKit.View' }"),ko.applyBindings(e,e._body),e._bind=!1}))},View}();_View.View=View}(NXKit.View||(NXKit.View={}));var View=NXKit.View}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){!function(t){function n(t){return t.Type==e.NodeType.Text&&""===(t.Value()||"").trim()}function r(e){return null==e||n(e)}function o(e){return!r(e)&&t.GroupNodes.some(function(t){return e.Name==t})}function i(e){return e.some(function(e){return o(e)})}function u(e){return e.filter(function(e){return o(e)})}function a(e){return!r(e)&&t.ControlNodes.some(function(t){return e.Name==t})}function l(e){return e.some(function(e){return a(e)})}function s(e){return e.filter(function(e){return a(e)})}function c(e){return!r(e)&&t.MetadataNodes.some(function(t){return e.Name==t})}function f(e){return e.some(function(e){return c(e)})}function p(e){return e.filter(function(e){return c(e)})}function d(e){return r(e)||t.TransparentNodePredicates.some(function(t){return t(e)})}function y(e){return e.some(function(e){return d(e)})}function h(e){return e.filter(function(e){return a(e)})}function v(e){try{for(var t=e.filter(function(e){return!c(e)}),n=new Array,r=0;r<t.length;r++){var o=t[r];if(null==o)throw new Error("ViewModelUtil.GetContentNodes(): prospective Node is null");if(d(o))for(var i=v(o.Nodes()),u=0;u<i.length;u++)n.push(i[u]);else n.push(o)}return n}catch(a){throw a.message='ViewModelUtil.GetContentNodes()"\nMessage: '+a.message,a}}function m(e){try{return v(e.Nodes())}catch(t){throw t.message='ViewModelUtil.GetContents()"\nMessage: '+t.message,t}}t.LayoutManagers=[function(t){return new e.DefaultLayoutManager(t)}],t.GroupNodes=[],t.ControlNodes=[],t.MetadataNodes=[],t.TransparentNodes=[],t.TransparentNodePredicates=[function(e){return t.TransparentNodes.some(function(t){return t===e.Name})}],t.IsEmptyTextNode=n,t.IsIgnoredNode=r,t.IsGroupNode=o,t.HasGroupNode=i,t.GetGroupNodes=u,t.IsControlNode=a,t.HasControlNode=l,t.GetControlNodes=s,t.IsMetadataNode=c,t.HasMetadataNode=f,t.GetMetadataNodes=p,t.IsTransparentNode=d,t.HasTransparentNode=y,t.GetTransparentNodes=h,t.GetContentNodes=v,t.GetContents=m}(e.ViewModelUtil||(e.ViewModelUtil={}));e.ViewModelUtil}(e.View||(e.View={}));e.View}(NXKit||(NXKit={}));var NXKit;return function(e){!function(t){!function(n){var r=function(){function n(){}return n.prototype.init=function(e,t,r,o,i){var u=n.ConvertValueAccessor(e,t,o,i);null!=u&&ko.bindingHandlers.template.init(e,function(){return u},r,o,i)},n.prototype.update=function(e,t,r,o,i){var u=n.ConvertValueAccessor(e,t,o,i);null!=u&&ko.bindingHandlers.template.update(e,function(){return u},r,o,i)},n.ConvertValueAccessor=function(n,r,o){var i=r()||o,u=ko.observable("NXKit.View.Loading");if(null==i)return{data:null,name:u};var a=function(e){try{return JSON.parse(e)}catch(t){return console.error(t),null}},l=i.Property("NXKit.View.Js.ViewModule","Require"),s=null!=l?l.Value.peek()||[]:[];return e.require(s,function(){for(var e=[],n=0;n<arguments.length-0;n++)e[n]=arguments[n+0];for(var r=e.length-1;r>=0;r--){var o=e[r];if(o instanceof HTMLElement){var l=$(o).find('script[type="text/html"]').get().reverse();for(var s in l){var c=$(l[s]),f=c.data("nx-node-view-data");if(null==f){var p=c.attr("data-nx-node-view");p&&(f=c.data("nx-node-view-data",a(p)).data("nx-node-view-data"))}if(null!=f&&i.Match(f)){var d=c.attr("id");return(null==d||""==d)&&c.attr("id",d="NXKit.View__"+t.Util.GenerateGuid().replace(/-/g,"")),void(u()!=d&&u(d))}}}}u("NXKit.View.Unknown")}),{data:i,name:u}},n}();n.NodeBindingHandler=r,ko.bindingHandlers.nx_node=new r,ko.virtualElements.allowedBindings.nx_node=!0}(t.Knockout||(t.Knockout={}));t.Knockout}(e.View||(e.View={}));e.View}(NXKit||(NXKit={})),NXKit};NXKit.requirejs=NXKit.requirejs||requirejs,NXKit.require=NXKit.require||require,NXKit.define=NXKit.define||define,NXKit.define("nxkit",["jquery","knockout"],function(e,t){return init(e,t,NXKit)})}(window.NXKit||(window.NXKit={})),NXKit.define("nx-css",["jquery"],function(){return{load:function(e,t,n){t(["jquery"],function(t){if(0==t("head").children("[data-nx-require='"+e+"']").length)var r=t(document.createElement("link")).attr("data-nx-require",e).attr("rel","stylesheet").attr("type","text/css").attr("href",_NXKit.View.Web.UI.handlerUrl+"?m="+e).appendTo(t("head")).bind("load",function(){n(r.get(0))})})}}}),NXKit.define("nx-html",["jquery"],function(){return{load:function(e,t,n){t(["jquery"],function(t){var r=t("body>*[data-nx-html-host]");if(0==r.length&&(r=t(document.createElement("div")).attr("data-nx-html-host","").css("display","none").prependTo("body")),0==r.children("[data-nx-require='"+e+"']").length)var o=t(document.createElement("div")).attr("data-nx-require",e).appendTo(r).load(_NXKit.View.Web.UI.handlerUrl+"?m="+e,function(){n(o.get(0))})})}}});