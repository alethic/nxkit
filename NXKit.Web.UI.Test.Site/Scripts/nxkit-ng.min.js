define(["jquery","angular","nxkit","knockout"],function(n,e,t){var i=angular.module("nx",[]);i.directive("nxView",["$compile",function(){return{restrict:"E",scope:{url:"@url"},controller:"nxView",template:'           <div class="nx-ng-host">               <div class="nx-ng-body"></div>           </div>',link:function(n,e,t,i){i.init(e,n.url)}}}]),i.controller("nxView",["$scope","$attrs","$http",function(e,i,o){this.init=function(i,r){var c=this;e.url=r;var l=n(i[0]).find(">.nx-ng-host");if(0==l.length)throw new Error("cannot find host element");var u=n(l).find(">.nx-ng-body");if(0==u.length)throw new Error("cannot find body element");n(document).ready(function(){null==e.view&&(e.view=new t.Web.View(u[0],function(n,e){c.send(n,e)})),o.get(e.url).success(function(n){e.view.Receive(n)}).error(function(n){console.log(n)})})},this.send=function(n,t){o.post(e.url,n).success(function(n){t(n)}).error(function(n){console.log(n)})}}])});