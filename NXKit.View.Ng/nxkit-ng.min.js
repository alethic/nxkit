define(["jquery","angular","nxkit","knockout"],function(n,e,i){var t=angular.module("nx",[]);t.directive("nxView",["$compile",function(){return{restrict:"E",scope:{url:"@url"},controller:"nxView",template:'           <div class="nx-view">               <div class="nx-body"></div>           </div>',link:function(n,e,i,t){t.init(e,n.url)}}}]),t.controller("nxView",["$scope","$attrs","$http",function(e,t,o){this.init=function(t,r){e.url=r;var c=n(t[0]).find(">.host");if(0==c.length)throw new Error("cannot find host element");var l=n(c).find(">.body");if(0==l.length)throw new Error("cannot find body element");null==e.view&&(e.view=new i.Web.View(l[0],function(n,e){this.send(n,e)})),o.get(e.url).success(function(n){e.view.Receive(n)}).error(function(n){console.log(n)})},this.send=function(n,i){o.post(e.url,n).success(function(n){i(n)}).error(function(n){console.log(n)})}}])});