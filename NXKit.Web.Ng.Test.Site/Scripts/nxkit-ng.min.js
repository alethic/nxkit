define(["jquery","angular","nxkit","knockout"],function(n,e,i){var t=angular.module("nx",[]);t.directive("nxView",["$compile",function(){return{restrict:"E",scope:{url:"@url"},controller:"nxView",template:'           <div class="nx-view">               <div class="nx-body"></div>           </div>',link:function(n,e,i,t){t.init(e,n.url)}}}]),t.controller("nxView",["$scope","$attrs","$http",function(e,t,o){this.init=function(t,r){var c=this;e.url=r;var l=n(t[0]).find(">.nx-view");if(0==l.length)throw new Error("cannot find host element");var u=n(l).find(">.nx-body");if(0==u.length)throw new Error("cannot find body element");n(document).ready(function(){null==e.view&&(e.view=new i.Web.View(u[0],function(n,e){c.send(n,e)})),o.get(e.url).success(function(n){e.view.Receive(n)}).error(function(n){console.log(n)})})},this.send=function(n,i){o.post(e.url,n).success(function(n){i(n)}).error(function(n){console.log(n)})}}])});