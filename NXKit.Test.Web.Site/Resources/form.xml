<f:form xmlns:xsd="http://www.w3.org/2001/XMLSchema"
        xmlns:f="http://schemas.nxkit.org/nxkit/2014/xforms-layout"
        xmlns:xf="http://www.w3.org/2002/xforms"
        xmlns:ev="http://www.w3.org/2001/xml-events">
    <xf:model id="data">

        <xf:instance id="misc">
            <data xmlns="">
                <secondary>false</secondary>
                <secondary_enabled />
            </data>
        </xf:instance>
        <xf:bind nodeset="xf:instance('misc')/secondary"
                 type="xsd:boolean" />
        <xf:bind nodeset="xf:instance('misc')/secondary_enabled"
                 relevant="xf:instance('misc')/secondary='true'"/>

        <xf:instance id="primaryperson"
                     src="primaryperson.xml" />
        <xf:bind nodeset="xf:instance('primaryperson')/heightfeet"
                 required="true()"
                 type="xsd:int"/>
        <xf:bind nodeset="xf:instance('primaryperson')/heightinches"
                 required="true()"
                 type="xsd:int"/>
        <xf:bind nodeset="xf:instance('primaryperson')/weight"
                 required="true()"
                 type="xsd:int"/>
        <xf:bind nodeset="xf:instance('primaryperson')/gender"
                 required="true()"
                 type="xsd:string"/>
        <xf:bind nodeset="xf:instance('primaryperson')/dateofbirth"
                 required="true()"
                 type="xsd:date"/>
        <xf:bind nodeset="xf:instance('primaryperson')/socialsecuritynumber"
                 required="true()"
                 constraint="matches(., '^(\d{3}-\d{2}-\d{4})|(\d{9})$')"/>
        <xf:bind nodeset="xf:instance('primaryperson')/telephone1"
                 required="true()"
                 constraint="string-length()>=10"/>

        <xf:bind nodeset="xf:instance('primaryperson')/telephone2"
                 required="false()"
                 constraint=".='' or string-length()>=10" />

        <xf:instance id="secondaryperson"
                     src="secondaryperson.xml" />
        <xf:bind nodeset="xf:instance('secondaryperson')"
                 relevant="xf:instance('misc')/secondary='true'"/>
        <xf:bind nodeset="xf:instance('secondaryperson')/heightfeet"
                 required="true()"
                 type="xsd:int"/>
        <xf:bind nodeset="xf:instance('secondaryperson')/heightinches"
                 required="true()"
                 type="xsd:int"/>
        <xf:bind nodeset="xf:instance('secondaryperson')/weight"
                 required="true()"
                 type="xsd:int"/>
        <xf:bind nodeset="xf:instance('secondaryperson')/dateofbirth"
                 type="xsd:date"/>

        <xf:instance id="primaryelections"
                     src="primaryelections.xml" />

        <xf:instance id="secondaryelections"
                     src="secondaryelections.xml" />

        <xf:instance id="primaryquestions"
                     src="questions.xml" />
        <xf:bind nodeset="xf:instance('primaryquestions')//healthinfo"
                 relevant="../answer='true' and ./@enable='true'" />
        <xf:bind nodeset="xf:instance('primaryquestions')/question/healthinfo/*"
                 type="xsd:string" />

        <xf:instance id="secondaryquestions"
                     src="questions.xml" />
        <xf:bind nodeset="xf:instance('secondaryquestions')"
                 relevant="xf:instance('misc')/secondary='true'"/>
        <xf:bind nodeset="xf:instance('secondaryquestions')//healthinfo"
                 relevant="../answer='true' and ./@enable='true'" />

        <xf:instance id="relationships"
                     src="relationships.xml" />

        <xf:instance id="beneficiaries"
                     src="beneficiaries.xml" />
        <xf:bind nodeset="xf:instance('beneficiaries')//percentage"
                 type="xsd:integer" />

        <xf:submission ref="xf:instance('primaryperson')"
                       method="put"
                       action="primaryperson.xml" />
        <xf:submission ref="xf:instance('secondaryperson')"
                       method="put"
                       action="secondaryperson.xml" />
        <xf:submission ref="xf:instance('primaryelections')"
                       method="put"
                       action="primaryelections.xml" />
        <xf:submission ref="xf:instance('secondaryelections')"
                       method="put"
                       action="secondaryelections.xml" />
        <xf:submission ref="xf:instance('primaryquestions')"
                       method="put"
                       action="primaryquestions.xml" />
        <xf:submission ref="xf:instance('secondaryquestions')"
                       method="put"
                       action="secondaryquestions.xml" />
        <xf:submission ref="xf:instance('beneficiaries')"
                       method="put"
                       action="beneficiaries.xml" />
    </xf:model>
    <f:page>
        <xf:label>Applicant Enrollment</xf:label>
        <xf:group>
            <xf:label>Additional Enrollees</xf:label>
            <xf:input ref="xf:instance('misc')/secondary"
                      appearance="full">
                <xf:label>Yes, I'd like to take advantage of this offer for my spouse or other partner or whatever and stuff and we will fill in the contents of the rest of this text later.</xf:label>
            </xf:input>
        </xf:group>
        <xf:group ref="xf:instance('primaryperson')">
            <xf:label>Additional Information About You</xf:label>
            <xf:help>Complete the form by providing your physical characterists, personal information, and contact information.</xf:help>
            <xf:group>
                <xf:label>Physical Characteristics</xf:label>
                <xf:range ref="heightfeet"
                          start="2"
                          end="15"
                          step="1">
                    <xf:label>Feet</xf:label>
                </xf:range>
                <xf:range ref="heightinches"
                          start="0"
                          end="11"
                          step="1">
                    <xf:label>Inches</xf:label>
                </xf:range>
                <xf:range ref="weight"
                          start="50"
                          end="500"
                          step="5">
                    <xf:label>Weight</xf:label>
                </xf:range>
                <xf:select1 ref="gender">
                    <xf:label>Sex</xf:label>
                    <xf:item>
                        <xf:label>Male</xf:label>
                        <xf:value>M</xf:value>
                    </xf:item>
                    <xf:item>
                        <xf:label>Female</xf:label>
                        <xf:value>F</xf:value>
                    </xf:item>
                </xf:select1>
            </xf:group>
            <xf:input ref="dateofbirth">
                <xf:label>Date of Birth</xf:label>
                <xf:help>Provide your date of birth to continue.</xf:help>
                <xf:hint appearance="minimal">mm/dd/yyyy</xf:hint>
            </xf:input>
            <xf:input ref="socialsecuritynumber">
                <xf:label>Social Security Number</xf:label>
                <xf:hint appearance="minimal">___-__-____</xf:hint>
                <xf:alert>Your social security number is required to continue.</xf:alert>
            </xf:input>
            <xf:group>
                <xf:label>Contact Information</xf:label>
                <xf:input ref="telephone1">
                    <xf:label>Home Phone</xf:label>
                    <xf:hint appearance="minimal">1 (___) ___-____</xf:hint>
                </xf:input>
                <xf:input ref="telephone2">
                    <xf:label>Work Phone</xf:label>
                </xf:input>
            </xf:group>
        </xf:group>
        <xf:group ref="xf:instance('primaryelections')/term-life">
            <xf:label>Coverage Election</xf:label>
            <xf:hint>Choose the type of coverage and amounts for which you are applying.</xf:hint>
            <xf:select1 ref="coverage-amount"
                        appearance="full">
                <xf:item>
                    <xf:label>$75,000</xf:label>
                    <xf:value>75000</xf:value>
                </xf:item>
                <xf:item>
                    <xf:label>$100,000</xf:label>
                    <xf:value>100000</xf:value>
                </xf:item>
                <xf:item>
                    <xf:label>$150,000</xf:label>
                    <xf:value>150000</xf:value>
                </xf:item>
            </xf:select1>
        </xf:group>
        <xf:group ref="xf:instance('primaryquestions')">
            <xf:label>Health Questions</xf:label>
            <xf:hint>Please answer the following questions by checking “Yes” or “No.”</xf:hint>
            <xf:repeat nodeset="question">
                <xf:group>
                    <xf:select1 ref="answer"
                                incremental="true">
                        <xf:label ref="../text" />
                        <xf:item>
                            <xf:label>No</xf:label>
                            <xf:value>false</xf:value>
                        </xf:item>
                        <xf:item>
                            <xf:label>Yes</xf:label>
                            <xf:value>true</xf:value>
                        </xf:item>
                    </xf:select1>
                    <xf:group ref="healthinfo">
                        <xf:input ref="condition">
                            <xf:label>Condition</xf:label>
                        </xf:input>
                        <xf:input ref="dates">
                            <xf:label>Dates</xf:label>
                        </xf:input>
                        <xf:input ref="currentstatus">
                            <xf:label>Current Status</xf:label>
                        </xf:input>
                        <xf:input ref="physicianname">
                            <xf:label>Physician Name</xf:label>
                        </xf:input>
                        <xf:input ref="physicianaddress">
                            <xf:label>Physician Address</xf:label>
                        </xf:input>
                        <xf:input ref="physicianphonenumber">
                            <xf:label>Physician Phone Number</xf:label>
                        </xf:input>
                    </xf:group>
                </xf:group>
            </xf:repeat>
        </xf:group>
    </f:page>
    <f:page xf:ref="xf:instance('misc')/secondary_enabled">
        <xf:label>Spousal Enrollment</xf:label>
        <xf:group ref="xf:instance('secondaryperson')">
            <xf:label>Spouse Information</xf:label>
            <xf:group>
                <xf:label>Name</xf:label>
                <xf:input ref="firstname">
                    <xf:label>First</xf:label>
                </xf:input>
                <xf:input ref="middlename">
                    <xf:label>Middle</xf:label>
                </xf:input>
                <xf:input ref="lastname">
                    <xf:label>Last</xf:label>
                </xf:input>
            </xf:group>
            <xf:group>
                <xf:label>Physical Characteristics</xf:label>
                <xf:range ref="heightfeet"
                          start="2"
                          end="15"
                          step="1">
                    <xf:label>Feet</xf:label>
                </xf:range>
                <xf:range ref="heightinches"
                          start="0"
                          end="11"
                          step="1">
                    <xf:label>Inches</xf:label>
                </xf:range>
                <xf:range ref="weight"
                          start="50"
                          end="500"
                          step="5">
                    <xf:label>Weight</xf:label>
                </xf:range>
                <xf:select1 ref="gender">
                    <xf:label>Sex</xf:label>
                    <xf:item>
                        <xf:label>Male</xf:label>
                        <xf:value>M</xf:value>
                    </xf:item>
                    <xf:item>
                        <xf:label>Female</xf:label>
                        <xf:value>F</xf:value>
                    </xf:item>
                </xf:select1>
            </xf:group>
            <xf:input ref="dateofbirth">
                <xf:label>Date of Birth</xf:label>
            </xf:input>
            <xf:input ref="socialsecuritynumber">
                <xf:label>Social Security Number</xf:label>
            </xf:input>
        </xf:group>
        <xf:group ref="xf:instance('secondaryelections')/term-life">
            <xf:label>Coverage Selection</xf:label>
            <xf:hint>Choose the type of coverage and amounts for which you are applying.</xf:hint>
            <xf:select1 ref="coverage-amount">
                <xf:item>
                    <xf:label>$75,000</xf:label>
                    <xf:value>75000</xf:value>
                </xf:item>
                <xf:item>
                    <xf:label>$100,000</xf:label>
                    <xf:value>100000</xf:value>
                </xf:item>
                <xf:item>
                    <xf:label>$150,000</xf:label>
                    <xf:value>150000</xf:value>
                </xf:item>
            </xf:select1>
        </xf:group>
        <xf:group ref="xf:instance('secondaryquestions')">
            <xf:label>Health Questions</xf:label>
            <xf:hint>Please answer the following questions by checking “Yes” or “No.”</xf:hint>
            <xf:repeat nodeset="question">
                <xf:group>
                    <xf:select1 ref="answer"
                                incremental="true">
                        <xf:label ref="../text" />
                        <xf:item>
                            <xf:label>No</xf:label>
                            <xf:value>false</xf:value>
                        </xf:item>
                        <xf:item>
                            <xf:label>Yes</xf:label>
                            <xf:value>true</xf:value>
                        </xf:item>
                    </xf:select1>
                    <xf:group ref="healthinfo">
                        <xf:input ref="condition">
                            <xf:label>Condition</xf:label>
                        </xf:input>
                        <xf:input ref="dates">
                            <xf:label>Dates</xf:label>
                        </xf:input>
                        <xf:input ref="currentstatus">
                            <xf:label>Current Status</xf:label>
                        </xf:input>
                        <xf:input ref="physicianname">
                            <xf:label>Physician Name</xf:label>
                        </xf:input>
                        <xf:input ref="physicianaddress">
                            <xf:label>Physician Address</xf:label>
                        </xf:input>
                        <xf:input ref="physicianphonenumber">
                            <xf:label>Physician Phone Number</xf:label>
                        </xf:input>
                    </xf:group>
                </xf:group>
            </xf:repeat>
        </xf:group>
    </f:page>
    <f:page>
        <xf:label>Additional Information</xf:label>
        <xf:repeat nodeset="xf:instance('beneficiaries')/beneficiary">
            <xf:input ref="firstname"
                      appearance="minimal">
                <xf:label />
            </xf:input>
            <xf:input ref="middlename"
                      appearance="minimal">
                <xf:label />
            </xf:input>
            <xf:input ref="lastname"
                      appearance="minimal">
                <xf:label />
            </xf:input>
            <xf:input ref="socialsecuritynumber"
                      appearance="minimal">
                <xf:label />
            </xf:input>
            <xf:input ref="telephone"
                      appearance="minimal">
                <xf:label />
            </xf:input>
            <xf:input ref="relationship" />
            <xf:range ref="percentage"
                      start="0"
                      step="5"
                      end="100">
                <xf:label />
            </xf:range>
        </xf:repeat>
    </f:page>
</f:form>
