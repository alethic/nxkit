var ___init_nxkit___=function($,ko){var NXKit;!function(e){!function(){!function(){function e(){this._listeners=[]}return e.prototype.add=function(e){this._listeners.push(e)},e.prototype.remove=function(e){if("function"==typeof e){for(var t=0,n=this._listeners.length;n>t;n++)if(this._listeners[t]===e){this._listeners.splice(t,1);break}}else this._listeners=[]},e.prototype.trigger=function(){for(var e=[],t=0;t<arguments.length-0;t++)e[t]=arguments[t+0];for(var n={},o=this._listeners.slice(0),r=0,i=o.length;i>r;r++)o[r].apply(n,e||[])},e}()}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function t(t,n,o){this._suspend=!1;var r=this;r._intf=t,r._name=n,r._value=ko.observable(null),r._value.subscribe(function(){r._suspend||r.OnUpdate()}),r._valueAsString=e.Util.Computed({read:function(){var e=null!=r._value()?String(r._value()).trim():null;return e?e:null},write:function(e){var t=null!=e?e.trim():null;return r._value(t?t:null)}}),r._valueAsBoolean=e.Util.Computed({read:function(){return r._value()===!0||"true"===r._value()||"True"===r._value()},write:function(e){r._value(e?"true":"false")}}),r._valueAsNumber=e.Util.Computed({read:function(){return""!=r._value()?parseFloat(r._value()):null},write:function(e){r._value(null!=e?e.toString():null)}}),r._valueAsDate=e.Util.Computed({read:function(){return null!=r._value()?new Date(r._value()):null},write:function(e){r._value(e instanceof Date?e.toDateString():"string"==typeof e?null!=e?new Date(e):null:null)}}),null!=o&&r.Update(o)}return Object.defineProperty(t.prototype,"Interface",{get:function(){return this._intf},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Node",{get:function(){return this._intf.Node},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"View",{get:function(){return this._intf.View},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ValueAsString",{get:function(){return this._valueAsString},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ValueAsBoolean",{get:function(){return this._valueAsBoolean},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ValueAsNumber",{get:function(){return this._valueAsNumber},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ValueAsDate",{get:function(){return this._valueAsDate},enumerable:!0,configurable:!0}),t.prototype.Update=function(t){try{var n=this;if(null!=t&&null!=t.Type&&"Object"===t.Type){if(n._suspend=!0,null!=n._value()&&n._value()instanceof e.Node)n._value().Apply(t),e.Log.Debug(n.Name+": Node=>Node");else{var o=new e.Node(n._intf.View,t);n._value(o),e.Log.Debug(n.Name+": Node+>Node")}return void(n._suspend=!1)}var r=n._value();r!==t&&(n._suspend=!0,n._value(t),e.Log.Debug(n.Name+": "+r+"=>"+t),n._suspend=!1)}catch(i){throw i.message="Property.Update()\nMessage: "+i.message,i}},t.prototype.ToData=function(){return this._value()},t.prototype.OnUpdate=function(){this.View.PushUpdate(this.Node,this.Interface,this,this._value())},t}();e.Property=t}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function t(t,n){this._view=t,this._id=-1,this._data=null,this._type=null,this._name=null,this._value=ko.observable(),this._intfs=new e.InterfaceMap,this._nodes=ko.observableArray(),null!=n&&this.Apply(n)}return Object.defineProperty(t.prototype,"View",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsNode",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Interfaces",{get:function(){return this._intfs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Nodes",{get:function(){return this._nodes},enumerable:!0,configurable:!0}),t.prototype.Property=function(e,t){try{var n=this._intfs[e];if(null==n)return null;var o=n.Properties[t];return null==o?null:o}catch(r){throw r.message="Node.Property()\nMessage: "+r.message,r}},t.prototype.Invoke=function(e,t,n){this.View.PushInvoke(this,e,t,n)},t.prototype.Apply=function(e){try{this._data=e,this.ApplyId(e.Id),this.ApplyType(e.Type),this.ApplyName(e.Name),this.ApplyValue(e.Value),this.ApplyInterfaces(e),this.ApplyNodes(e.Nodes)}catch(t){throw t.message="Node.Apply()\nMessage: "+t.message,t}},t.prototype.ApplyId=function(e){this._id=e},t.prototype.ApplyType=function(t){this._type=e.NodeType.Parse(t)},t.prototype.ApplyName=function(e){this._name=e},t.prototype.ApplyValue=function(e){this._value(e)},t.prototype.ApplyInterfaces=function(e){try{var t=this;for(var n in e)n.indexOf(".")>-1&&t.UpdateInterface(n,e[n])}catch(o){throw o.message="Node.UpdateInterfaces()\nMessage: "+o.message,o}},t.prototype.UpdateInterface=function(t,n){try{var o=this,r=o._intfs[t];null==r?r=o._intfs[t]=new e.Interface(o,t,n):r.Apply(n)}catch(i){throw i.message="Node.UpdateInterface()\nMessage: "+i.message,i}},t.prototype.ApplyNodes=function(e){try{var n=this;if(null==e)return void n._nodes.removeAll();for(var o=0;o<e.length;o++)if(n._nodes().length<o+1){var r=new t(n._view,e[o]);n._nodes.push(r)}else n._nodes()[o].Apply(e[o]);n._nodes().length>e.length&&n._nodes.splice(e.length)}catch(i){throw i.message="Node.UpdateNodes()\nMessage: "+i.message,i}},t.prototype.ToData=function(){var e=this,t={Id:e._id};for(var n in e._intfs)t[n]=e._intfs[n].ToData();return t},t.prototype.NodesToData=function(){return ko.utils.arrayMap(this._nodes(),function(e){return e.ToData()})},t}();e.Node=t}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){!function(t){function n(e){return ko.observable(e).extend({rateLimit:{timeout:50,method:"notifyWhenChangesStop"}})}function o(e){return ko.observableArray(e).extend({rateLimit:{timeout:50,method:"notifyWhenChangesStop"}})}function r(e){return ko.computed(e).extend({rateLimit:{timeout:50,method:"notifyWhenChangesStop"}})}function i(e,n,o){if(null!=o){var r=o(e,n);if(null!=r)return r}if(null==e&&null===n)return!0;if(typeof e!=typeof n)return!1;if("boolean"==typeof e&&"boolean"==typeof n)return e===n;if("string"==typeof e&&"string"==typeof n)return e===n;if("number"==typeof e&&"number"==typeof n)return e===n;if("function"==typeof e&&"function"==typeof n)return e.toString()===n.toString();for(var i in e)if(e.hasOwnProperty(i))if(n.hasOwnProperty(i)){if(!t.DeepEquals(e[i],n[i],o))return!1}else if(!t.DeepEquals(e[i],null,o))return!1;for(var i in n)if(n.hasOwnProperty(i))if(e.hasOwnProperty(i)){if(!t.DeepEquals(e[i],n[i],o))return!1}else if(!t.DeepEquals(null,n[i],o))return!1;return!0}function u(){for(var e=[],t="0123456789abcdef",n=0;36>n;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}function a(e){return[e.$data].concat(e.$parents)}function l(t){return ko.utils.arrayFirst(a(t),function(t){return t instanceof e.LayoutManager})}t.Observable=n,t.ObservableArray=o,t.Computed=r,t.DeepEquals=i,t.GenerateGuid=u,t.GetContextItems=a,t.GetLayoutManager=l}(e.Util||(e.Util={}));e.Util}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function t(e){this._context=null,this._parent=null;var n=this;if(null==e)throw new Error("context: null");n._context=e,n._parent=ko.computed(function(){var e=[n._context.$data].concat(n._context.$parents);for(var o in e){var r=e[o];if(r instanceof t&&r!=n)return r}return null})}return Object.defineProperty(t.prototype,"Context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Parent",{get:function(){return this._parent()},enumerable:!0,configurable:!0}),t.prototype.GetTemplateOptions_=function(e,t,n,o){return this.GetTemplateOptions(e,t,n,o)},t.prototype.GetTemplateOptions=function(e,t,n,o){return null!=this.Parent?this.Parent.GetTemplateOptions(e,t,n,o||{}):o||{}},t.prototype.GetLocalTemplates=function(){return new Array},t.prototype.GetTemplates=function(){return this.GetLocalTemplates().concat(null!=this.Parent?this.Parent.GetTemplates():new Array)},t.prototype.GetNode=function(t,n){var o=ko.unwrap(t());if(null!=n){var r=ko.unwrap(n);if(r instanceof e.Node)return r}return null!=o&&o instanceof e.Node?o:null!=o&&null!=o.node?ko.unwrap(o.node):void 0},t.prototype.GetUnknownTemplate=function(e){return $("<script />",{type:"text/html",text:'<span class="ui red label">'+JSON.stringify(e)+"</span>"}).appendTo("body")[0]},t.GetTemplateNodeData=function(e){var t=$(e).data("nxkit");if(null!=t)return t;t={};for(var n=0;n<e.attributes.length;n++){var o=e.attributes.item(n);if(0==o.nodeName.indexOf("data-nxkit-")){var r=o.nodeName.substring(11);t[r]=$(e).data("nxkit-"+r)}}return $(e).data("nxkit",t).data("nxkit")},t.TemplatePredicate=function(n,o){return e.Log.Group("TemplatePredicate",function(){if(null!=o&&0==Object.getOwnPropertyNames(o).length)return e.Log.Debug("opts: empty"),!1;var r=t.GetTemplateNodeData(n);return 0==Object.getOwnPropertyNames(r).length?(e.Log.Debug("tmpl: empty"),!1):(e.Log.Object({tmpl:r,opts:o}),e.Util.DeepEquals(r,o,function(e,t){return"*"===e||"*"===t?!0:null}))})},t.TemplateFilter=function(e,n){return e.filter(function(e){return t.TemplatePredicate(e,n)})},t.prototype.GetTemplate=function(e){return t.TemplateFilter(this.GetTemplates(),e)[0]||this.GetUnknownTemplate(e)},t.prototype.GetTemplateName=function(n){var o=this;return e.Log.Group("LayoutManager.GetTemplateName",function(){var r=o.GetTemplate(n);if(null==r)throw new Error("LayoutManager.GetTemplate: no template located");return""==r.id&&(r.id="NXKit.Web__"+e.Util.GenerateGuid().replace(/-/g,"")),e.Log.Object({id:r.id,data:t.GetTemplateNodeData(r)}),ko.observable(r.id)})},t}();e.LayoutManager=t}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);n.prototype=t.prototype,e.prototype=new n},NXKit;!function(e){!function(e){var t=function(t){function n(e){t.call(this,e)}return __extends(n,t),n.prototype.GetTemplateOptions=function(n,o,r,i){try{i=t.prototype.GetTemplateOptions.call(this,n,o,r,i);var u=t.prototype.GetNode.call(this,n,o,r),a=ko.unwrap(n());return null!=u&&u.Type==e.NodeType.Element&&(i.name=u.Name),null!=u&&u.Type==e.NodeType.Text&&(i.type=e.NodeType.Text.ToString()),null!=a&&null!=a.name&&(i.name=ko.unwrap(a.name)),null!=a&&null!=a.layout&&(i.layout=ko.unwrap(a.layout)),i}catch(l){throw l.message="DefaultLayoutManager.GetTemplateOptions()\nMessage: "+l.message,l}},n.prototype.GetLocalTemplates=function(){return null==this._templates&&(this._templates=$('script[type="text/html"]').get()),this._templates},n}(e.LayoutManager);e.DefaultLayoutManager=t}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function e(e){this.callback=e}return Object.defineProperty(e.prototype,"Promise",{get:function(){var e=this;return null!=e.deferred?e.deferred.promise():(e.deferred=$.Deferred(),e.callback(e.deferred),e.deferred.progress())},enumerable:!0,configurable:!0}),e}(),n=function(){function e(){this._queue=new Array}return e.prototype.Register=function(e){var n=this;n._queue.push(new t(e))},e.prototype.Wait=function(e){for(var t=this,n=new Array,o=0;o<t._queue.length;o++)n[o]=t._queue[o].Promise;$.when.apply($,n).done(e)},e}();e.DeferredExecutor=n}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function t(t,n,o){var r=this;r._node=t,r._name=n,r._properties=new e.PropertyMap,null!=o&&r.Apply(o)}return Object.defineProperty(t.prototype,"Node",{get:function(){return this._node},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"View",{get:function(){return this._node.View},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Properties",{get:function(){return this._properties},enumerable:!0,configurable:!0}),t.prototype.Apply=function(t){try{var n=this,o=[];for(var r in n._properties)o.push(n._properties[r]);for(var r in t){var i=r,u=i,a=n._properties[u];null==a?n._properties[u]=new e.Property(n,u,t[i]):a.Update(t[i]);var l=o.indexOf(a);-1!=l&&(o[l]=null)}for(var s=0;s<o.length;s++){var a=o[s];null!=a&&delete n._properties[a.Name]}}catch(c){throw c.message="Interface.Apply()\nMessage: "+c.message,c}},t.prototype.ToData=function(){var e=this,t={};for(var n in e._properties){var o=n,r=e._properties[o];t[e._properties[o].Name]=r.ToData()}return t},t}();e.Interface=t}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function e(){}return e}();e.InterfaceMap=t}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){!function(e){var t=function(){function e(){}return e._init=function(t,n,o,r,i){setTimeout(function(){$(t).checkbox(),$(t).checkbox("setting",{onEnable:function(){var e=!0,t=ko.unwrap(n());if("boolean"==typeof t)e!=t&&n()(e);else if("string"==typeof t){var o="true"===t.toLowerCase()?!0:!1;e!=o&&n()(e?"true":"false")}},onDisable:function(){var e=!1,t=ko.unwrap(n());if("boolean"==typeof t)e!=t&&n()(e);else if("string"==typeof t){var o="true"===t.toLowerCase()?!0:!1;e!=o&&n()(e?"true":"false")}}}),e._update(t,n,o,r,i)},2e3)},e._update=function(e,t){setTimeout(function(){var n=ko.unwrap(t());if("boolean"==typeof n)$(e).checkbox(n?"enable":"disable");else if("string"==typeof n){var o="true"===n.toLowerCase()?!0:!1;$(e).checkbox(o?"enable":"disable")}},1e3)},e.prototype.init=function(t,n,o,r,i){e._init(t,n,o,r,i)},e.prototype.update=function(t,n,o,r,i){e._update(t,n,o,r,i)},e}();e.CheckboxBindingHandler=t,ko.bindingHandlers.nxkit_checkbox=new t}(e.Knockout||(e.Knockout={}));e.Knockout}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={})),$.fn.extend({slideRightShow:function(){return this.each(function(){$(this).show("slide",{direction:"right"},1e3)})},slideLeftHide:function(){return this.each(function(){$(this).hide("slide",{direction:"left"},1e3)})},slideRightHide:function(){return this.each(function(){$(this).hide("slide",{direction:"right"},1e3)})},slideLeftShow:function(){return this.each(function(){$(this).show("slide",{direction:"left"},1e3)})}});var NXKit;!function(e){!function(e){!function(e){var t=function(){function e(){}return e.prototype.init=function(e,t){var n=t();$(e).toggle(ko.utils.unwrapObservable(n)),ko.utils.unwrapObservable(n)?$(e).slideLeftShow():$(e).slideLeftHide()},e.prototype.update=function(e,t){var n=t();ko.utils.unwrapObservable(n)?$(e).slideLeftShow():$(e).slideLeftHide()},e}();e.HorizontalVisibleBindingHandler=t,ko.bindingHandlers.nxkit_hvisible=new t,ko.virtualElements.allowedBindings.nxkit_hvisible=!0}(e.Knockout||(e.Knockout={}));e.Knockout}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){!function(e){var t=function(){function e(){}return e._init=function(e,t,n,o,r){ko.bindingHandlers.value.init(e,t,n,o,r)},e._update=function(e,t,n,o,r){ko.bindingHandlers.value.update(e,t,n,o,r)},e.prototype.init=function(t,n,o,r,i){e._init(t,n,o,r,i)},e.prototype.update=function(t,n,o,r,i){e._update(t,n,o,r,i)},e}();e.InputBindingHandler=t,ko.bindingHandlers.nxkit_input=new t}(e.Knockout||(e.Knockout={}));e.Knockout}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(t){!function(t){var n=function(){function t(){}return t._init=function(t,n,o,r,i){for(var u=i,a=e.Web.ViewModelUtil.LayoutManagers,l=0;l<a.length;l++)u=u.createChildContext(a[l](u),null,null);return u=u.createChildContext(r),u=u.createChildContext(r),ko.applyBindingsToDescendants(u,t),{controlsDescendantBindings:!0}},t.prototype.init=function(e,n,o,r,i){return t._init(e,n,o,r,i)},t}();t.LayoutManagerExportBindingHandler=n,ko.bindingHandlers.nxkit_layout_manager_export=new n,ko.virtualElements.allowedBindings.nxkit_layout_manager_export=!0}(t.Knockout||(t.Knockout={}));t.Knockout}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){!function(e){var t=function(){function e(){}return e.prototype.init=function(e,t,n,o,r){ko.utils.extend(n(),{clickBubble:!1});ko.bindingHandlers.click.init(e,function(){return function(){setTimeout(function(){var e=t();e&&$("#"+e).modal("show")},5)}},n,o,r)},e}();e.ModalBindingHandler=t,ko.bindingHandlers.nxkit_modal=new t}(e.Knockout||(e.Knockout={}));e.Knockout}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){!function(t){var n=function(){function t(){}return t.prototype.init=function(t,n,o,r,i){var u=new e.LayoutOptions(n()),a=i.createChildContext(u,null,null),l=a.createChildContext(r,null,null);return ko.applyBindingsToDescendants(l,t),{controlsDescendantBindings:!0}},t}();t.OptionsBindingHandler=n,ko.bindingHandlers.nxkit_layout=new n,ko.virtualElements.allowedBindings.nxkit_layout=!0}(e.Knockout||(e.Knockout={}));e.Knockout}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(t){!function(n){var o=function(){function n(){}return n.prototype.init=function(e,t,o,r,i){return ko.bindingHandlers.template.init(e,n.ConvertValueAccessor(t,r,i),o,r,i)},n.prototype.update=function(e,t,o,r,i){return ko.bindingHandlers.template.update(e,n.ConvertValueAccessor(t,r,i),o,r,i)},n.ConvertValueAccessor=function(e,n,o){var r=this;return function(){return t.Log.Group("TemplateBindingHandler.ConvertValueAccessor",function(){t.Log.Object({value:e(),viewModel:n});var i=r.GetTemplateViewModel(e,n,o);if(null==i||0==Object.getOwnPropertyNames(i).length)throw new Error("unknown viewModel");var u=r.GetTemplateOptions(e,n,o);if(null==u||0==Object.getOwnPropertyNames(u).length)throw new Error("unknown template options");var a=r.GetTemplateName(o,u);if(null==a)throw new Error("unknown template");return t.Log.Object({data:i,opts:u,name:a}),{data:i,name:a}})}},n.GetTemplateViewModel=function(e,n){var o=e();return null!=o&&ko.unwrap(o)instanceof t.Node?o:null!=o&&null!=o.data?o.data:null!=o&&null!=o.node&&ko.unwrap(o.node)instanceof t.Node?o.node:n},n.GetTemplateOptions=function(t,n,o){return e.Web.Util.GetLayoutManager(o).GetTemplateOptions_(t,n,o,{})},n.GetTemplateName=function(t,n){return e.Web.Util.GetLayoutManager(t).GetTemplateName(n)},n}();n.TemplateBindingHandler=o,ko.bindingHandlers.nxkit_template=new o,ko.virtualElements.allowedBindings.nxkit_template=!0}(t.Knockout||(t.Knockout={}));t.Knockout}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){!function(e){var t=function(){function e(){}return e.prototype.init=function(e,t){var n=t();$(e).toggle(ko.utils.unwrapObservable(n)),ko.utils.unwrapObservable(n)?$(e).slideDown():$(e).slideUp()},e.prototype.update=function(e,t){var n=t();ko.utils.unwrapObservable(n)?$(e).slideDown():$(e).slideUp()},e}();e.VisibleBindingHandler=t,ko.bindingHandlers.nxkit_visible=new t,ko.virtualElements.allowedBindings.nxkit_visible=!0}(e.Knockout||(e.Knockout={}));e.Knockout}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function t(e){this._args=e}return t.GetArgs=function(n){for(var o={},r=e.Util.GetContextItems(n),i=0;i<r.length;i++)r[i]instanceof t&&(o=ko.utils.extend(o,r[i]));return o},Object.defineProperty(t.prototype,"Args",{get:function(){return this._args},enumerable:!0,configurable:!0}),t}();e.LayoutOptions=t}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function e(){}return e.Group=function(t,n){"function"==typeof console.group&&e.Verbose&&console.group(t);var o=null!=n?n():null;return e.Verbose&&console.dir(o),"function"==typeof console.groupEnd&&e.Verbose&&console.groupEnd(),o},e.Debug=function(t){for(var n=[],o=0;o<arguments.length-1;o++)n[o]=arguments[o+1];e.Verbose&&console.debug(t,n)},e.Object=function(t){for(var n=[],o=0;o<arguments.length-1;o++)n[o]=arguments[o+1];e.Verbose&&console.dir(t,n)},e.Verbose=!1,e}();e.Log=t}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function e(e,t){this._severity=e,this._text=t}return Object.defineProperty(e.prototype,"Severity",{get:function(){return this._severity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Text",{get:function(){return this._text},enumerable:!0,configurable:!0}),e}();e.Message=t}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function e(e){this._value=e}return e.Parse=function(t){switch(t.toLowerCase()){case"text":return e.Text;case"element":return e.Element}return e.Object},e.prototype.ToString=function(){return this._value},e.Object=new e("object"),e.Text=new e("text"),e.Element=new e("element"),e}();e.NodeType=t}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function t(t,n){var o=this;if(null==t)throw new Error("context: null");if(!(n instanceof e.Node))throw new Error("node: null");o._context=t,o._node=n}return Object.defineProperty(t.prototype,"Context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Node",{get:function(){return this._node},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Contents",{get:function(){return this.GetContents()},enumerable:!0,configurable:!0}),t.prototype.GetContents=function(){try{return e.ViewModelUtil.GetContents(this.Node)}catch(t){throw t.message='NodeViewModel.GetContents()"\nMessage: '+t.message,t}},Object.defineProperty(t.prototype,"ContentsCount",{get:function(){return this.Contents.length},enumerable:!0,configurable:!0}),t}();e.NodeViewModel=t}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function e(){}return e}();e.PropertyMap=t}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){!function(e){e[e.Verbose=1]="Verbose",e[e.Information=2]="Information",e[e.Warning=3]="Warning",e[e.Error=4]="Error"}(e.Severity||(e.Severity={}));e.Severity}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(e){!function(e){var t=function(){function t(t){this._executor=new e.DeferredExecutor;var n=this;n._baseUrl=t}return t.prototype.Register=function(e){var t=this;t._executor.Register(function(n){$(document).ready(function(){var o=$("body>*[nx-template-container]");0==o.length&&(o=$(document.createElement("div")).attr("nx-template-container","").css("display","none").prependTo("body"));var r=$(document.createElement("div")).attr("nx-template-url",t._baseUrl+e).load(t._baseUrl+e,function(){$(o).append(r),n.resolve()})})})},t.prototype.Wait=function(e){var t=this;t._executor.Wait(e)},t}();e.TemplateManager=t,t.Default=new t("/Content/"),t.Default.Register("nxkit.html")}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={}));var NXKit;!function(NXKit){!function(Web){var View=function(){function View(e,t){var n=this;n._server=t,n._body=e,n._save=null,n._hash=null,n._root=null,n._bind=!0,n._threshold=3,n._queue=new Array,n._queueRunning=!1,n._busy=ko.observable(!1)}return Object.defineProperty(View.prototype,"Busy",{get:function(){return this._busy},enumerable:!0,configurable:!0}),Object.defineProperty(View.prototype,"Body",{get:function(){return this._body},enumerable:!0,configurable:!0}),Object.defineProperty(View.prototype,"Data",{get:function(){return{Save:this._save,Hash:this._hash}},enumerable:!0,configurable:!0}),Object.defineProperty(View.prototype,"Root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(View.prototype,"Threshold",{get:function(){return this._threshold},set:function(e){this._threshold=e},enumerable:!0,configurable:!0}),View.prototype.Receive=function(e){var t=this;t._save=e.Save||t._save,t._hash=e.Hash||t._hash;var n=e.Node||null;null!=n&&t.ReceiveNode(n);var o=e.Commands||null;null!=o&&t.ReceiveCommands(o)},View.prototype.ReceiveNode=function(e){var t=this;null!=e&&t.Apply(e||null)},View.prototype.ReceiveCommands=function(commands){for(var self=this,i=0;i<commands.length;i++){var command=commands[i];null!=command&&"NXKit.Web.Commands.Script, NXKit.Web"===command.$type&&null!=command.Code&&eval(command.Code)}},View.prototype.Apply=function(e){var t=this;null==t._root?t._root=new Web.Node(t,e):t._root.Apply(e),t.ApplyBindings()},View.prototype.PushUpdate=function(e,t,n,o){var r=this;Web.Log.Debug("View.PushUpdate");var i={$type:"NXKit.Web.Commands.Update, NXKit.Web",NodeId:e.Id,Interface:t.Name,Property:n.Name,Value:o};r.Queue(i)},View.prototype.PushInvoke=function(e,t,n,o){var r=this;Web.Log.Debug("View.PushInvoke");var i={$type:"NXKit.Web.Commands.Invoke, NXKit.Web",NodeId:e.Id,Interface:t,Method:n,Parameters:o};r.Queue(i)},View.prototype.Queue=function(e){var t=this,n=this;if(n._queue.push(e),!n._queueRunning){n._queueRunning=!0;var o={},r=new Array;setTimeout(function(){n._busy(!0);var e=function(){var i=n._queue.splice(0),u=function(a){if(200==a.Status){var l=a.Hash||null;null!=l&&(t._hash=l);var s=a.Save||null;null!=s&&(t._save=s),null!=a.Node&&(o=a.Node),null!=a.Commands&&ko.utils.arrayPushAll(r,a.Commands),0==n._queue.length&&n.Receive({Hash:t._hash,Save:t._save,Node:o,Commands:r}),e()}else if(400==a.Status)n._server({Save:n._save,Hash:n._hash,Commands:i},u);else{if(500!=a.Status)throw new Error("unexpected response code");for(var c=0;c<a.Errors.length;c++)throw new Error(a.Errors[c].Message||"")}};i.length>0?n._server({Hash:n._hash,Commands:i},u):(n._queueRunning=!1,n._busy(!1))};e()},50)}},View.prototype.ApplyBindings=function(){var e=this;e._bind&&null!=e._body&&null!=e._root&&(ko.cleanNode(e._body),Web.TemplateManager.Default.Wait(function(){$(e._body).attr("data-bind","template: { name: 'NXKit.View' }"),ko.applyBindings(e,e._body),e._bind=!1}))},View}();Web.View=View}(NXKit.Web||(NXKit.Web={}));var Web=NXKit.Web}(NXKit||(NXKit={}));var NXKit;return function(e){!function(e){!function(t){function n(t){return t.Type==e.NodeType.Text&&""===(t.Value()||"").trim()}function o(e){return null==e||n(e)}function r(e){return!o(e)&&t.GroupNodes.some(function(t){return e.Name==t})}function i(e){return e.some(function(e){return r(e)})}function u(e){return e.filter(function(e){return r(e)})}function a(e){return!o(e)&&t.ControlNodes.some(function(t){return e.Name==t})}function l(e){return e.some(function(e){return a(e)})}function s(e){return e.filter(function(e){return a(e)})}function c(e){return!o(e)&&t.MetadataNodes.some(function(t){return e.Name==t})}function p(e){return e.some(function(e){return c(e)})}function f(e){return e.filter(function(e){return c(e)})}function d(e){return o(e)||t.TransparentNodePredicates.some(function(t){return t(e)})}function b(e){return e.some(function(e){return d(e)})}function y(e){return e.filter(function(e){return a(e)})}function h(e){try{for(var t=e.filter(function(e){return!c(e)}),n=new Array,o=0;o<t.length;o++){var r=t[o];if(null==r)throw new Error("ViewModelUtil.GetContentNodes(): prospective Node is null");if(d(r))for(var i=h(r.Nodes()),u=0;u<i.length;u++)n.push(i[u]);else n.push(r)}return n}catch(a){throw a.message='ViewModelUtil.GetContentNodes()"\nMessage: '+a.message,a}}function m(e){try{return h(e.Nodes())}catch(t){throw t.message='ViewModelUtil.GetContents()"\nMessage: '+t.message,t}}t.LayoutManagers=[function(t){return new e.DefaultLayoutManager(t)}],t.GroupNodes=[],t.ControlNodes=[],t.MetadataNodes=[],t.TransparentNodes=[],t.TransparentNodePredicates=[function(e){return t.TransparentNodes.some(function(t){return t===e.Name})}],t.IsEmptyTextNode=n,t.IsIgnoredNode=o,t.IsGroupNode=r,t.HasGroupNode=i,t.GetGroupNodes=u,t.IsControlNode=a,t.HasControlNode=l,t.GetControlNodes=s,t.IsMetadataNode=c,t.HasMetadataNode=p,t.GetMetadataNodes=f,t.IsTransparentNode=d,t.HasTransparentNode=b,t.GetTransparentNodes=y,t.GetContentNodes=h,t.GetContents=m}(e.ViewModelUtil||(e.ViewModelUtil={}));e.ViewModelUtil}(e.Web||(e.Web={}));e.Web}(NXKit||(NXKit={})),window.NXKit=NXKit,NXKit};if("function"==typeof define&&define.amd)define("nxkit",["jquery","knockout"],function(e,t){return ___init_nxkit___(e,t)});else{if("function"!=typeof $||"object"!=typeof ko)throw new Error("RequireJS missing or jQuery and knockout missing.");___init_nxkit___($,ko)}